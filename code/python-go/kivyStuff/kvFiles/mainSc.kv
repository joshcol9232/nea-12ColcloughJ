#: import Window kivy.core.window.Window

<MainScreen>:
    addFile: addFile
    key: root.key

    RelativeLayout:                 #Adds background in case fade transition breaks.
        canvas.before:
            Color:
                rgba: 0,0,0,2
            Rectangle:
                pos: self.pos
                size: self.size

    FloatLayout:
        id: MainLayout


        TextInput:
            id: Search
            size_hint: .46, .08
            font_size: 22
            hint_text: "Search:"
            pos_hint: {"x": 0.16, "top": 1}
            multiline: False
            on_text_validate: root.searchForItem(self.text)


        Button:
            id: home
            size_hint: .06, .08
            pos_hint: {"x": .62, "y": 0.84}
            on_release: root.goHome()
            Image:
                source: root.getPathForButton("home.png")
                x: self.parent.x + 5
                y: self.parent.y
                size: 50, 50
                allow_stretch: True

        Button:
            id: settings
            size_hint: .06, .08
            pos_hint: {"x": 0.62, "top": 1}
            on_release: root.manager.current = "Settings"
            Image:
                source: root.getPathForButton("settings.png")
                x: self.parent.x+10
                y: self.parent.y + (self.parent.y*(self.parent.size_hint[1]/2))/4
                size: 40, 40
                allow_stretch: True

        Button:     #Padlock
            id: LogOut
            size_hint: .16, .16
            pos_hint: {"x": 0, "top": 1}
            on_release: root.lock()#root.clearUpTempFiles();app.root.current = "Login"
            Image:
                source: root.getPathForButton("padlock.png")
                x: self.parent.x + self.size[0]
                y: self.parent.y + self.parent.y*(self.parent.size_hint[1]/4)
                size: 50, 66.765 #1 : 1.3353 ratio
                allow_stretch: False

        Button:
            id: addFile
            size_hint: .16, .16
            pos_hint: {"right": 1, "top": 1}
            on_release: root.openAddFilePop()
            Image:
                source: root.getPathForButton("addFile.png")
                x: self.parent.x + self.parent.size[0]/5
                y: self.parent.y - self.parent.y*(self.parent.size_hint[1]/4)
                size: 100, 133.54
                allow_stretch: False

        Button:
            id: goBackFolder
            size_hint: .16, .16
            pos_hint: {"x": 0.68, "top": 1}
            on_release: root.goBackFolder()
            Image:
                source: root.getPathForButton("backUpFolder.png")
                x: self.parent.x + (self.parent.width/5)
                y: self.parent.y - (self.parent.height/6)
                size: 100, 133.54
                allow_stretch: False

        Button:
            id: manuallyRefresh
            size_hint: .06, .08
            pos_hint: {"right": 1, "y": 0.76}
            on_release: root.refreshButtons()
            Image:
                source: root.getPathForButton("refresh-icon.png")
                x: self.parent.x - 10
                y: self.parent.y - 30
                size: 80, 112
                allow_stretch: True

        Button:
            id: addFolder
            size_hint: .06, .08
            pos_hint: {"right": 1, "y": 0.68}
            text: "Add Folder"
            text_size: self.size
            on_release: root.openAddFolderPop()

        Button:
            id: recyclingBin
            size_hint: .09, .14
            pos_hint: {"right": 1, "bottom": 1}
            on_release: root.openRecycling()
            Image:
                source: root.getPathForButton("recycling.png")
                size: Window.width/8, Window.height/8
                x: Window.width - Window.width/9
                y: 0


        ProgressBar:
            id: pb1
            min: 0
            max: root.values(False)[0]
            value: root.values(False)[1]
            size_hint: .46, .08
            pos_hint: {"x": 0.16, "y": 0.84}

        Label:
            pos_hint: {"x": 0.4, "y": 0.82}
            size_hint: .16, .16
            text: root.values(True)
